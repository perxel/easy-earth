{% assign page_handle = page.handle %}

{% if section.blocks.size > 0 %}
    <div class="gallery-slider-wrapper ee-margin-bottom-40px">
        <div class="gallery-slider">
            {% for block in section.blocks %}
                {% if block.settings.page_handle == page_handle %}
                    <div class="gallery-slider__item">
                        <div class="gallery-slider__item-inner">
                            <div class="gallery-slider__img ee-bg-cover"
                                 style="background-image: url({{ block.settings.slide_img | img_url: 'original' }})">
                                <img src="{{ block.settings.slide_img | img_url: 'original' }}" alt=""
                                     class="slider_img" />
                            </div>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>
{% endif %}

{% schema %}
    {
        "name": "Gallery Slider",
        "max_blocks": 9,
        "blocks": [
            {
            "type": "image",
            "name": "Slide",
            "settings": [
                    {
                        "type": "page",
                        "id": "page_handle",
                        "label": "Select a page"
                    },
                    {
                        "type": "image_picker",
                        "id": "slide_img",
                        "label": "Add img for slide"
                    }
                ]
            }
        ]
    }
{% endschema %}